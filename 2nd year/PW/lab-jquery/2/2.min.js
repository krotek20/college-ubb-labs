$(function () {
    $("#form").submit(function (e) {
        e.preventDefault();

        const nameOk = /^[a-z ,.'-]+$/i.test($("#name").val());
        $("#name").css("borderColor", nameOk ? "" : "red");

        const birthDate = new Date($("#birth").val());
        const birthOk = /^\d{2}\/\d{2}\/\d{4}$/i.test($("#birth").val()) &&
            new Date($("#birth").val()).getFullYear() < new Date().getFullYear();
        $("#birth").css("borderColor", birthOk ? "" : "red");

        let actualAge = Math.abs(birthDate.getFullYear() - new Date().getFullYear());
        actualAge -= birthDate.getMonth() > new Date().getMonth() ||
            (birthDate.getMonth() === new Date().getMonth() &&
                birthDate.getDay() > new Date().getDay()) ? 1 : 0;
        const ageOk = Number($("#age").val()) === actualAge;
        $("#age").css("borderColor", ageOk ? "" : "red");

        const mailOk = /^[\w-]+@([\w-]+\.)+[\w-]+$/i.test($("#mail").val());
        $("#mail").css("borderColor", mailOk ? "" : "red");

        if (nameOk && birthOk && ageOk && mailOk) {
            alert("Datele sunt completate corect");
        } else {
            const badFields = [];
            if (!nameOk) badFields.push("name");
            if (!birthOk) badFields.push("birth");
            if (!ageOk) badFields.push("age");
            if (!mailOk) badFields.push("mail");
            alert(`Anumite campuri (${badFields.join(", ")}) sunt completate incorect`);
        }
    });
});